<!DOCTYPE html>
<!--[if lte IE 8 ]>
<html class="ie" xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-US" lang="en-US">
<![endif]-->


<html lang="zh-cmn-Hans">
<!--<![endif]-->

<head>
  <title>如何调试CSS的关键帧(keyframe)动画 | Cyseria | blog</title>
  <!-- Meta data -->
    <meta http-equiv="Content-Type" content="text/html" charset="UTF-8" >
    <meta http-equiv="X-UA-Compatible" content="IE=edge"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="generator" content="Cyseria | blog">
    <meta name="author" content="Cyseria">
    <meta name="description" content="鳗鱼鱼的博客" />
    <meta name="keywords" content="" />
    
    <!-- Favicon, (keep icon in root folder) -->
    <link rel="Shortcut Icon" href="/img/favicon.ico" type="image/ico">
    <link rel="stylesheet" href="/css/all.css" media="screen" type="text/css">
	
    <link rel="stylesheet" href="/highlightjs/vs.css" type="text/css">
    
    

    <!-- Custom stylesheet, (add custom styles here, always load last) -->
    <!-- Load our stylesheet for IE8 -->
    <!--[if IE 8]>
    <link rel="stylesheet" type="text/css" href="/css/ie8.css" />
    <![endif]-->
    <script src="https://cdn.bootcss.com/jquery/2.1.4/jquery.min.js"></script>

    <!-- Load these in the <head> for quicker IE8+ load times -->
    <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
    <script src="/js/html5shiv.min.js"></script>
    <script src="/js/respond.min.js"></script>
    <![endif]-->


  <script>
var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "//hm.baidu.com/hm.js?79a8aa5d4d01d92682c49b2594b37631";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script>

</head>

<!--
<body class="post-template">
-->
<body id="index" class="lightnav animsition">

      <!-- ============================ Off-canvas navigation =========================== -->
	<div class="menu">
		<header>
			<h1>M<span>\</span>Q</h1>
			<h2>A coder &amp;&amp; designer</h2>
		</header>

		<div class="code menu-item">
			<a href="/categories/code">
				<img src="/img/life.png" alt="">
				<h1>编码</h1>
				<h2>Code Note</h2>
			</a>
		</div>

		<div class="show menu-item">
			<a href="//404">
				<img src="/img/design.png" alt="">
				<h1>展出</h1>
				<h2>Show Time</h2>
			</a>
		</div>
		<div class="design menu-item">
			<a href="/categories/design">
				<img src="/img/note.png" alt="">
				<h1>设计</h1>
				<h2>Some Design</h2>
			</a>
		</div>
	</div>
    
    <!-- ============================ END Off-canvas navigation =========================== -->

    <!-- ============================ #sb-site Main Page Wrapper =========================== -->
    <div class="menu-btn">
    	<span></span>
    	<span></span>
    	<span></span>
    </div>
    <div id="sb-site">
        <!-- #sb-site - All page content should be contained within this id, except the off-canvas navigation itself -->

        <!-- ============================ Header & Logo bar =========================== -->

        <div id="navigation" class="navbar navbar-fixed-top">
        	
            <div class="navbar-inner">
                <div class="container">
                    <!-- Info-bar -->
                    <nav>
                        <ul class="nav">
                            <li><a href="/" class="animsition-link">Cyseria | blog</a></li>
                            <li class="nolink"><span>Always </span>Creative.</li>
                            
                            <li><a href="https://github.com/cyseria" title="Github" target="_blank"><i class="icon-github"></i></a></li>
                            
                            
                            <li><a href="http://weibo.com/u/1887935412" title="Sina-Weibo" target="_blank"><i class="icon-sina-weibo"></i></a></li>
                            
<!--                             <li><a href="/archives" class="animsition-link" title="archive">归档</a></li> -->
                            <li class="nolink"><span>Welcome!</span></li>
                        </ul>
                    </nav>
                    <!--// Info-bar -->
                </div>
                <!-- // .container -->
                <div class="learnmore"><a href="/about" class="animsition-link" title="about">About&gt;&gt;</a></div>
                
            </div>
            <!-- // .navbar-inner -->
        </div>

        <!-- ============================ Header & Logo bar =========================== -->

        <!-- ============================ Hero Image =========================== -->

       

        <!-- Height spacing helper -->
        
        <!-- // End height spacing helper -->

        <!-- ============================ END Hero Image =========================== -->
      
<section id="intro">
    <div class="container">
        <div class="row col-md-offset-2">
            <div class="col-md-8">
    			<span class="post-meta">
      <time datetime="2016-02-01T16:13:42.000Z" itemprop="datePublished">
          2016-02-02
      </time>
    
    
    | 
    <a href='/tags/animation/'>animation</a>,
    
    <a href='/tags/debug/'>debug</a>
    
    
</span>
                <h1>如何调试CSS的关键帧(keyframe)动画</h1>
            </div>
        </div>
        <div class="col-md-8 col-md-offset-2">
      		<h1 id="如何调试CSS的关键帧(keyframe)动画">如何调试CSS的关键帧(keyframe)动画</h1><blockquote>
<p>我们可以学习语法来创建CSS动画，但创造美丽流畅的动画可能就要关注更多细节了。如今动画被高度关注，因此正确调整代码动画的时间，以及出错时各种调试方法突显重要。在自己解决这个问题后整理一番。</p>
</blockquote>
<h2 id="使用负值延迟">使用负值延迟</h2><p>当多个动画同时运行，我们想他们错开一点。这时可以用<code>animation-delay</code>，但你不一定想用户访问页面时，他们要等待延迟看到某些元素不动的情况。</p>
<p>这时，将<code>animation-delay</code>设置成一个负数，它就会跳过几秒直接进入动画，因此显示器显示时所有的动画都是运行状态。当动画有相同的的关键帧动画(keyframe values)而只是运动延迟时间不同，这个方法就可以大展身手了。</p>
<p>当然，使用该概念进行调试也是不错的选择。设置<code>animation-play-state;</code> 然后调整不同负时间的延迟。你会看到动画在运动中的不同暂停状态。</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="class">.thing</span> <span class="rules">&#123;</span><br><span class="line">  <span class="rule"><span class="attribute">animation</span>:<span class="value"> move <span class="number">2s</span> linear infinite alternate</span></span>;</span><br><span class="line">  <span class="rule"><span class="attribute">animation-play-state</span>:<span class="value"> paused</span></span>;</span><br><span class="line">  <span class="rule"><span class="attribute">animation-delay</span>:<span class="value"> -<span class="number">1s</span></span></span>;</span><br><span class="line">&#125;</span></span><br></pre></td></tr></table></figure>
<p>例：</p>
<iframe height="268" scrolling="no" src="//codepen.io/team/css-tricks/embed/LVMMGZ/?height=268&theme-id=0&default-tab=result" frameborder="no" allowtransparency="true" allowfullscreen="true" style="width: 100%;">See the Pen <a href="http://codepen.io/team/css-tricks/pen/LVMMGZ/" target="_blank" rel="external">LVMMGZ</a> by CSS-Tricks (<a href="http://codepen.io/css-tricks" target="_blank" rel="external">@css-tricks</a>) on <a href="http://codepen.io" target="_blank" rel="external">CodePen</a>.<br></iframe>


<p>在下面这个有趣的演示中，我们让两个机器人在一个稍微不同的时间移动，从而让动画更自然。这里也是给紫机器人使用负延迟来运行动画，这样用户看到页面时他已经在运动了。</p>
<iframe height="268" scrolling="no" src="//codepen.io/sdras/embed/qdLJLJ/?height=268&theme-id=0&default-tab=result" frameborder="no" allowtransparency="true" allowfullscreen="true" style="width: 100%;">See the Pen <a href="http://codepen.io/sdras/pen/qdLJLJ/" target="_blank" rel="external">Robotter Love</a> by Sarah Drasner (<a href="http://codepen.io/sdras" target="_blank" rel="external">@sdras</a>) on <a href="http://codepen.io" target="_blank" rel="external">CodePen</a>.<br></iframe>

<h2 id="多个transform值">多个<code>transform</code>值</h2><p>为了获得最好的性能，您还应该使用<code>transform</code>来进行移动和变换，从而节省重绘margin / top / left 之类的成本。 Paul Lewis做了一个<a href="http://csstriggers.com/" target="_blank" rel="external">CSS Triggers</a>的列表来表示这些消耗。如果你想移动的东西有多种变换，那么也会有一些问题对应而来。</p>
<p>其中一个大问题就是他们的顺序。<code>transform</code>不会像人们预计的那样同时运行，而是像订单一样操作（有一定的先后顺序）。先运行的是最右边最远的一个，然后向内。例如，在下面的代码里，缩放会先执行(scale)，然后变换(translate)，最后旋转(rotate)。<br><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">keyframes foo &#123;</span><br><span class="line"> to &#123;</span><br><span class="line">   <span class="comment">/*         第三           第二              第一      */</span></span><br><span class="line">   <span class="attribute">transform</span><span class="value">: <span class="function">rotate</span>(<span class="number">90deg</span>) <span class="function">translateX</span>(<span class="number">30px</span>) <span class="function">scale</span>(<span class="number">1.5</span>);</span></span><br><span class="line"> &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>然而在大多数情况下这并不是理想情况，有时候你宁愿他们同时运动。此外，当你开始在多个<code>keyframe</code>里同时使用<code>transform</code>的值时候情况会变得更加复杂，像这样:</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="at_rule">@<span class="keyword">keyframes</span> foo </span>&#123;</span><br><span class="line">  30% <span class="rules">&#123;</span><br><span class="line">    <span class="rule"><span class="attribute">transform</span>:<span class="value"> <span class="function">rotateY</span>(<span class="number">360deg</span>)</span></span>;</span><br><span class="line">  &#125;</span></span><br><span class="line">  65% <span class="rules">&#123;</span><br><span class="line">    <span class="rule"><span class="attribute">transform</span>:<span class="value"> <span class="function">translateY</span>(-<span class="number">30px</span>) <span class="function">rotateY</span>(-<span class="number">360deg</span>) <span class="function">scale</span>(<span class="number">1.5</span>)</span></span>;</span><br><span class="line">  &#125;</span></span><br><span class="line">  90% <span class="rules">&#123;</span><br><span class="line">    <span class="rule"><span class="attribute">transform</span>:<span class="value"> <span class="function">translateY</span>(<span class="number">10px</span>) <span class="function">scale</span>(<span class="number">0.75</span>)</span></span>;</span><br><span class="line">  &#125;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>然后就有一些奇怪的，出乎意料的事情发生了。不幸的是，解决这个问题的答案通常是嵌套多个&lt; div &gt;，每个用一种<code>translation</code>，这样才不会出现冲突。<br>像这样：</p>
<iframe height="268" scrolling="no" src="//codepen.io/cyseria/embed/obMgZE/?height=268&theme-id=0&default-tab=result" frameborder="no" allowtransparency="true" allowfullscreen="true" style="width: 100%;">See the Pen <a href="http://codepen.io/cyseria/pen/obMgZE/" target="_blank" rel="external">Show Order of Operations Transform Fail</a> by cyseria (<a href="http://codepen.io/cyseria" target="_blank" rel="external">@cyseria</a>) on <a href="http://codepen.io" target="_blank" rel="external">CodePen</a>.<br></iframe><br>当然也有一些解决方法，比如使用矩阵变换(不是直观的手工代码)或使用一个JavaScript动画API，如<a href="http://greensock.com/" target="_blank" rel="external">GreenSock</a>，它可以让你不需要使用有序的序列来插入多个变换。<br><br>多使用个div也可以解决SVG的一些问题。例如在safari中，你不能在一个动画中同时声明透明度（opacity）和转换（transform），不然其中一个肯定无效。<br>2015年8月初，独立的变换声明（<a href="https://drafts.csswg.org/css-transforms-2/#individual-transforms" target="_blank" rel="external">ndependent transform declarations</a>）已经加入到了Chrome的Canary版本中。这意味着我们不用担心用更多的变换效果，可以分别声明<code>rotate</code>,<code>translate</code>和<code>scale</code>。<br><br>## 使用DevTools的时间控制器<br>无论是chrome还是firefox现在都有一些专门用于调试动画的工具，比如可以控制动画速度的滑块，暂停按钮和一些简单数值的UI测试(UI for working with the easing values)，通过放慢速度，暂停来观察动画的特殊点，是CSS动画中的一个非常有用的调试方法。<br><br>两个浏览器都使用Lea Verou的<a href="http://cubic-bezier.com/#.17,.67,.83,.67" target="_blank" rel="external">cubic-bezier.com</a>的可视化GUI。因此我们就不用反复去cubic-bezier.com调整再修改文本编辑器中的代码了。<br><br>这些工具让我们更直观的调整动画，来看看两个浏览器的界面：<br><img src="https://cdn.css-tricks.com/wp-content/uploads/2015/11/chrome-devopt2.jpg" alt="chrome animation tool"><br><br><img src="https://cdn.css-tricks.com/wp-content/uploads/2015/11/firefox-dev-opt2.jpg" alt="firefox animation tool"><br><br>chrome和firefox不仅可以控制动画时间（加速或者减速），还可以使用自定义动画。更为先进的时间轴工具也<a href="https://www.youtube.com/watch?v=U9xfYbKxosI" target="_blank" rel="external">即将chrome发布（ youtube视频需翻墙）</a>，它可以同时观看多个元素。毕竟，一次只能处理一个元素实在是动画调整中一个不小的限制。<br><br>还有一个麻烦就是如果动画的存在时间很短很快我就很难抓取到了，所以通常要对其设置<code>animation-iteration-count: infinite;</code>，才能不用太在意时间继续调试。<br><br>当然还有一些额外的工具去帮助我们让动画在浏览器中慢下来以此调整，回放。它允许你从根本上分开每个动作，观察元素之间的相互影响以及他们的运动状态。当你改变它的速度使其变流畅，整体效果也会更加出色的。<br><br>## 使用JavaScript调试CSS动画事件<br>如果你不想去计算动画到底是什么时间什么地方出错了，你可以在事件触发时用一点点的javascript来调试，将其添加到<code>animationstart</code>，<code>animationiteration</code>和<code>animationend</code>事件上。<br>例如：<br><iframe height="268" scrolling="no" src="//codepen.io/sdras/embed/PqXeMX/?height=268&theme-id=0&default-tab=result" frameborder="no" allowtransparency="true" allowfullscreen="true" style="width: 100%;">See the Pen <a href="http://codepen.io/sdras/pen/PqXeMX/" target="_blank" rel="external">Showing how to Debug CSS Animation Play States in JavaScript</a> by Sarah Drasner (<a href="http://c
odepen.io/sdras" target="_blank" rel="external">@sdras</a>) on <a href="http://codepen.io" target="_blank" rel="external">CodePen</a>.<br></iframe>

<h2 id="保持keyframe整洁">保持keyframe整洁</h2><p>我经常看到有些人在keyframe的0%和100%中声明相同的属性值，这是完全没必要的而且会让代码变得很臃肿。浏览器将默认属性值作为初始值和结束值。</p>
<p>像这样子就是太肿了：<br><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="class">.element</span> <span class="rules">&#123;</span><br><span class="line"> <span class="rule"><span class="attribute">animation</span>:<span class="value"> animation-name <span class="number">2s</span> linear infinite</span></span>;</span><br><span class="line">&#125;</span></span><br><span class="line"> </span><br><span class="line"><span class="at_rule">@<span class="keyword">keyframes</span> animation-name </span>&#123;</span><br><span class="line">  0% <span class="rules">&#123;</span><br><span class="line">   <span class="rule"><span class="attribute">transform</span>:<span class="value"> <span class="function">translateX</span>(<span class="number">200px</span>)</span></span>;</span><br><span class="line"> &#125;</span></span><br><span class="line">  50% <span class="rules">&#123;</span><br><span class="line">   <span class="rule"><span class="attribute">transform</span>:<span class="value"> <span class="function">translateX</span>(<span class="number">350px</span>)</span></span>;</span><br><span class="line"> &#125;</span></span><br><span class="line"> 100% <span class="rules">&#123;</span><br><span class="line">   <span class="rule"><span class="attribute">transform</span>:<span class="value"> <span class="function">translateX</span>(<span class="number">200px</span>)</span></span>;</span><br><span class="line"> &#125;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>正确的写法：<br><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="class">.element</span> <span class="rules">&#123;</span><br><span class="line"> <span class="rule"><span class="attribute">transform</span>:<span class="value"> <span class="function">translateX</span>(<span class="number">200px</span>)</span></span>;</span><br><span class="line"> <span class="rule"><span class="attribute">animation</span>:<span class="value"> animation-name <span class="number">2s</span> linear infinite</span></span>;</span><br><span class="line">&#125;</span></span><br><span class="line"> </span><br><span class="line"><span class="at_rule">@<span class="keyword">keyframes</span> animation-name </span>&#123;</span><br><span class="line">  50% <span class="rules">&#123;</span><br><span class="line">   <span class="rule"><span class="attribute">transform</span>:<span class="value"> <span class="function">translateX</span>(<span class="number">350px</span>)</span></span>;</span><br><span class="line"> &#125;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h2 id="DRY-ing_Out_Animations">DRY-ing Out Animations</h2><p>创造简洁漂亮的动画通常意味着写一个具体的<code>cubic-bezier()</code>函数。调整Easing函数的工作类似于公司的调色板。你可以在运动中拥有属于自己个性的标志和“声音”。如果你想在整个网站中使用（为了保持统一，你应该这样做），最简单的方法是将一个或两个Easing函数存储在一个变量中，就像我们将颜料混合在调色板里。使用SASS或者其他的于处理器可以让其更简单：<br><figure class="highlight xquery"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">//scss</span><br><span class="line"><span class="variable">$smooth</span>: cubic-bezier(<span class="number">0</span>.<span class="number">17</span>, <span class="number">0</span>.<span class="number">67</span>, <span class="number">0</span>.<span class="number">48</span>, <span class="number">1.28</span>);</span><br><span class="line"> </span><br><span class="line">.foo &#123; animation: animation-name <span class="number">3</span>s <span class="variable">$smooth</span>; &#125;</span><br><span class="line"> </span><br><span class="line">.bar &#123; animation: animation-name <span class="number">1</span>s <span class="variable">$smooth</span>; &#125;</span><br></pre></td></tr></table></figure></p>
<p>当使用css的keyframe来做动画时我们希望尽可能用到GPU的性能，这就意味着如果你有多个动画你想更容易的DOM操作给接下来要加载的运动和懒加载的元素。你可以用CSS中的标准声明块让硬件加速原生的DOM（不是SVG）。复用元素的动画是有意义的，这里使用mixin:<br><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="at_rule">@<span class="keyword">mixin</span><span class="preprocessor"> accelerate</span>(<span class="variable">$name</span>) &#123;</span></span><br><span class="line"> will-change<span class="value">: <span class="variable">$name</span>;</span></span><br><span class="line"> <span class="attribute">transform</span><span class="value">: <span class="function">translateZ</span>(<span class="number">0</span>);</span></span><br><span class="line"> <span class="attribute">backface-visibility</span><span class="value">: hidden;</span></span><br><span class="line"> <span class="attribute">perspective</span><span class="value">: <span class="number">1000px</span>;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class">.foo</span> &#123;</span><br><span class="line">  <span class="at_rule">@<span class="keyword">include</span><span class="preprocessor"> accelerate</span>(transform);</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>当心，一次性转移太多元素可能会造成相反的效果并影响其性能。大多数动画应该正常，但是要如果你使用类似haml之类的标记语言来生成大量DOM元素时候要注意。</p>
<h2 id="使用循环来获得更好的性能">使用循环来获得更好的性能</h2><p>Smashing Magazine最近发表的一个工作之余的神奇项目，<a href="http://species-in-pieces.com/" target="_blank" rel="external">http://species-in-pieces.com/</a>。在一个特定的部分，作者讨论了关于动画细节，其碎片导致的性能问题。他说：</p>
<blockquote>
<p>假设你正在同时移动三十个物体，浏览器就要处理很多东西，然后或许就会有一些问题出现。如果你每个元素有0,199秒的速度和0.2秒的延迟，你可能会一次移动一个元素来修复这些问题。事实上，相同的运动并没必要重复产生。如果动画是一个链，性能是立即提高了30倍。</p>
</blockquote>
<figure class="highlight xquery"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">@<span class="keyword">for</span> <span class="variable">$i</span> from <span class="number">1</span> through <span class="variable">$n</span> &#123;</span><br><span class="line">  &amp;:nth-child(#&#123;<span class="variable">$i</span>&#125;) &#123;</span><br><span class="line">    animation: loadIn <span class="number">2</span>s #&#123;<span class="variable">$i</span>*<span class="number">0</span>.<span class="number">11</span>&#125;s <span class="variable">$easeOutSine</span> forwards;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>不仅如此,您可以使用它们来产生像颜色交错的视觉效果。(点击回放重新运行动画。)</p>
<p><iframe height="268" scrolling="no" src="//codepen.io/sdras/embed/RPEMZr/?height=268&theme-id=0&default-tab=result" frameborder="no" allowtransparency="true" allowfullscreen="true" style="width: 100%;">See the Pen <a href="http://codepen.io/sdras/pen/RPEMZr/" target="_blank" rel="external">SASS for loops in CSS Animations</a> by Sarah Drasner (<a href="http://codepen.io/sdras" target="_blank" rel="external">@sdras</a>) on <a href="http://codepen.io" target="_blank" rel="external">CodePen</a>.<br></iframe></p>
<h2 id="调整多动画序列">调整多动画序列</h2><p>当你在创建长动画时，我们通常将其排列成链式。类似:<br><figure class="highlight avrasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="label">animation:</span> foo <span class="number">3</span>s ease-<span class="keyword">in</span>-<span class="keyword">out</span>, bar <span class="number">4</span>s <span class="number">3</span>s ease-<span class="keyword">in</span>-<span class="keyword">out</span>, brainz <span class="number">6</span>s <span class="number">7</span>s ease-<span class="keyword">in</span>-<span class="keyword">out</span><span class="comment">;</span></span><br></pre></td></tr></table></figure></p>
<p>但是我们想想当你优化的时候，你发现你想改变动画的第二个属性值，这会影响接下来的它之后的所有元素，所以当我们调整之后。好像没什么大问题：<br><figure class="highlight avrasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="label">animation:</span> foo <span class="number">2.5</span>s ease-<span class="keyword">in</span>-<span class="keyword">out</span>, bar <span class="number">4</span>s <span class="number">2.5</span>s ease-<span class="keyword">in</span>-<span class="keyword">out</span>, brainz <span class="number">6</span>s <span class="number">6.5</span>s ease-<span class="keyword">in</span>-<span class="keyword">out</span><span class="comment">;</span></span><br></pre></td></tr></table></figure></p>
<p>现在让我们添加另一个动画也要再次进行调整（好的动画产生之前这种微调似乎是必然的），于是事情的效率好像就有点低了。当你这么做了3次，真的就非常低效率。<br>接着你可以想象一下如果你有两个动画并且要让他们保持一致…嗯你理解就好。这就是为什么每当当链式动画效果超越三个或四个，我就会使用JavaScript了。就个人而言，我比较喜欢<a href="https://greensock.com/" target="_blank" rel="external">GreenSock animation API</a>因为它有非常强健的时间轴功能，但是很多JS允许你在不重新计算的情况下使用简单的堆栈动画创造工作流。</p>
<h2 id="∞">∞</h2><p>制作一个动画不仅仅是构建起来。通常情况下，它是人们通过编辑精炼和调试从而让一个项目从一个只是精心策划过的的运动变成一个有更好的性能的动画。希望这些建议能够成为你工具箱的工具，使你工作起来更加顺畅。</p>
<hr>
<p>本文根据<a href="https://css-tricks.com/author/sdrasner/" target="_blank" rel="external">@SARAH DRASNER</a>的文章所译，整篇译文带有自己的理解和意思，如果有译得不好的地方或者不对之处，还请大家指点。英文出处：<a href="https://css-tricks.com/debugging-css-keyframe-animations/" target="_blank" rel="external">Debugging CSS Keyframe Animations</a></p>

            <div class="clearfix"></div>
            <hr class="nogutter">
        </div>
        <nav class="pagination" role="pagination">
    
    <a class="pull-left" href="/2016/02/22/logo/" style="float: left;">
        ← logo诞生记
    </a>
    
    
    <a class="pull-right" href="/2015/12/29/用emoji做切换按钮/">
        用emoji做切换按钮 →
    </a>
    
</nav>

        <div class="duoshuo">
<div class="ds-thread" data-thread-key="2016/02/02/Debug-animation/" data-title="如何调试CSS的关键帧(keyframe)动画" data-url="http://cyseria.xyz/2016/02/02/Debug-animation/"></div>
<script type="text/javascript">
var duoshuoQuery = {short_name:"cyseria"};
(function() {
	var ds = document.createElement('script');
	ds.type = 'text/javascript';ds.async = true;
	ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
	ds.charset = 'UTF-8';
	(document.getElementsByTagName('head')[0] 
	 || document.getElementsByTagName('body')[0]).appendChild(ds);
})();
</script>
</div>
    </div>
</section>


      
<!-- ============================ Footer =========================== -->

<footer>
    <div class="container">
            <div class="copy">
                <p>
                    &copy; 2014<script>new Date().getFullYear()>2010&&document.write("-"+new Date().getFullYear());</script>, Content By Cyseria. All Rights Reserved.
                </p>
            </div>
            <div class="footer-link">
                <p>友情链接</p>
                
                    <ul>
                        
                        <li><a href="http://collect.w3ctrain.com/">w3ctrain</a></li>
                        
                        <li><a href="http://www.helkyle.com/">Helkyle</a></li>
                        
                        <li><a href="http://www.jhdxr.com/">虾米</a></li>
                        
                        <li><a href="http://lastavenger.github.io/">谷月轩</a></li>
                        
                    </ul>
                
            </div> 
           
            <div class="social">
                <ul>
                    
                    <li><a href="https://github.com/cyseria" title="Github" target="_blank"><i class="icon-github"></i></a>&nbsp;</li>
                    
                    
                    
                    <li><a href="http://weibo.com/u/1887935412" title="Sina-Weibo" target="_blank"><i class="icon-sina-weibo"></i></a>&nbsp;</li>
                    
                </ul>
            </div>
            <div class="clearfix"> </div>
        </div>
</footer>

<!-- ============================ END Footer =========================== -->
      <!-- Load our scripts -->
        
<!-- Resizable 'on-demand' full-height hero -->
<script type="text/javascript">
    
    var resizeHero = function () {
        var hero = $(".cover,.heightblock"),
            window1 = $(window);
        hero.css({
            "height": window1.height()
        });
    };
    
    resizeHero();
    
    $(window).resize(function () {
        resizeHero();
    });
</script>
<script src="/js/plugins.min.js"></script><!-- Bootstrap core and concatenated plugins always load here -->
<script src="/js/jquery.flexslider-min.js"></script><!-- Flexslider plugin -->
<script src="/js/scripts.js"></script><!-- Theme scripts -->

<!-- Initiate flexslider plugin -->
<script type="text/javascript">
    $(document).ready(function($) {
      $('.flexslider').flexslider({
        animation: "fade",
        prevText: "",
        nextText: "",
        directionNav: true
      });
    });
</script>

</body>
</html>
